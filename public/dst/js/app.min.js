angular.module("app.config",[]).value("OWM_API_KEY","1ba7401f0fd8de8800f868d0400afc44"),angular.module("app.routes",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/map"),a.state("map",{url:"/map",templateUrl:"./views/ol3-map.html",controller:"MapCtrl as map"})}]);var app=angular.module("app",["ui.router","app.config","app.routes","map.ctrl","cities.service","weather.data.service"]);angular.module("map.ctrl",["openlayers-directive"]).controller("MapCtrl",["Cities","WeatherData",function(a,b){function c(){d.markers=[],b.getWeatherById(a.toString(a.all())).then(function(a){console.log("Data "+a)},function(a){console.log("Error "+a)})}var d=this;d.primorye={lat:45.3,lon:134.6,zoom:6},d.layers=[{name:"OpenStreetMap",active:!0,source:{type:"OSM"}}],c()}]),angular.module("cities.service",[]).factory("Cities",[function(){return{all:[{id:"2013348",name:"Vladivostok"},{id:"2017364",name:"Russkiy"},{id:"2027142",name:"Barabash"},{id:"2016430",name:"Slavyanka"},{id:"2015310",name:"Fokino"},{id:"2019528",name:"Nakhodka"},{id:"2018116",name:"Partizansk"},{id:"2014006",name:"Ussuriysk"},{id:"2027468",name:"Arsenyev"}],toString:function(a){for(var b="",c=0;c<a.length;c++)b+=a[c].id,c<a.length-1&&(b+=", ");return b}}}]),angular.module("weather.data.service",[]).factory("WeatherData",["OWM_API_KEY","$http",function(a,b){var c="http://api.openweathermap.org/data/2.5";return{getWeatherById:function(d){return b.get(c+"group?id="+d+"&appid="+a).then(function(a){return a.data})},getForecastById:function(d){return b.get(c+"weather?id="+d+"&appid="+a).then(function(a){return a.data})}}}]);